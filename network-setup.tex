% Network Setup


\chapter{Network setup}
\label{chap:network-setup}
This chapter explains the network setup.

\section {Network schema}
We can just check the High Availability main schema (figure \ref{fig:main-schema}) where network has been already described. There are two networks. The service link is the main network interface for serving content to the final users. The communication link, which it's used for the cluster management and syncronisation is done via a crossover cable.

\section {VirtualBox Network Implementation}

In order to implement this Network schema in VirtualBox the service link will be setup by the first virtual network card in each virtual machine. Both of tese virtual network card will be setup in bridge mode so that an actual switch serve them. The communication link will be setup by the second virtual network card in each virtual machine connected to a VirtualBox private network, that means that they will be connected via a virtual switch given by Virtualbox which it's isolated from other networks.

TODO: Add VirtualBox Network figure.

\section {Network setup}

\subsection {Primary server}
\subsubsection {Service link}
Primary server's Service link network setup consists of a Class C configuration where the network card address is 192.168.1.201, as per being a Class C its netmask is 255.255.255.0 and thus its broadcast is 192.168.1.255. As a gateway it will be using the first network address in the network range which it's 192.168.1.1.

\begin{verbatim}
auto eth0
iface eth0 inet static
        address 192.168.1.201
        netmask 255.255.255.0
        broadcast 192.168.1.255
        gateway 192.168.1.1
\end{verbatim}

\subsubsection {Communication link}
Primary server's Communication link network setup consists of a Class C configuration where the network card address is 10.0.2.201, as per being a Class C its netmask is 255.255.255.0 and thus its broadcast is 10.0.2.255. As a gateway it will be using the first network address in the network range which it's 10.0.2.1.

\begin{verbatim}
auto eth0
iface eth0 inet static
        address 10.0.2.201
        netmask 255.255.255.0
        broadcast 10.0.2.255
        gateway 10.0.2.1
\end{verbatim}
\subsection {Secondary server}
\subsubsection {Service link}
Secondary server's Service link network setup consists of a Class C configuration where the network card address is 192.168.1.202, as per being a Class C its netmask is 255.255.255.0 and thus its broadcast is 192.168.1.255. As a gateway it will be using the first network address in the network range which it's 192.168.1.1.

\begin{verbatim}
auto eth0
iface eth0 inet static
        address 192.168.1.202
        netmask 255.255.255.0
        broadcast 192.168.1.255
        gateway 192.168.1.1
\end{verbatim}

\subsubsection {Communication link}
Secondary server's Communication link network setup consists of a Class C configuration where the network card address is 10.0.2.202, as per being a Class C its netmask is 255.255.255.0 and thus its broadcast is 10.0.2.255. As a gateway it will be using the first network address in the network range which it's 10.0.2.1.

\begin{verbatim}
auto eth0
iface eth0 inet static
        address 10.0.2.202
        netmask 255.255.255.0
        broadcast 10.0.2.255
        gateway 10.0.2.1
\end{verbatim}

\section {Firewall}

TODO: Describe firewall. Ports that have been left opened.


